<?xml version="1.0" encoding="utf-8"?>
<html lang="en" xmlns:madcap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../Resources/TableStyles/TableStyle.css" rel="stylesheet" MadCap:stylesheetType="table" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" />
        <link href="../../Resources/StyleSheets/stylesheet.css" rel="stylesheet" type="text/css" />
        <link href="../../Resources/StyleSheets/docsstylesheet.css" rel="stylesheet" type="text/css" />
        <meta content="&lt;authorit:componentcd&gt;" name="componentcd" />
        <meta content="8355" name="objectid" />
        <meta content="227" name="basedOnKey" />
        <!--metadata variables for XMD: translatable-->
        <meta content="" name="description" />
        <meta content="&lt;authorit:ca_keywords&gt;" name="keywords" />
        <meta content="&lt;authorit:ca_content_type&gt;" name="ca_content_type" />
        <meta content="&lt;authorit:ca_context&gt;" name="ca_context" />
        <meta content="&lt;authorit:ca_role&gt;" name="ca_role" />
        <meta content="en-US" name="ca_language" />
        <!--metadata variables for XMD: do not translate-->
        <meta content="&lt;authorit:ca_offering_name&gt;" name="ca_offering_name" />
        <meta content="&lt;authorit:ca_product_version&gt;" name="ca_product_version" />
        <meta content="&lt;authorit:ca_product_family&gt;" name="ca_product_family" />
        <meta content="&lt;authorit:ca_alias_name&gt;" name="ca_alias_name" />
        <meta content="&lt;authorit:ca_related_offering&gt;" name="ca_related_offering" />
        <meta content="&lt;authorit:ca_access_level&gt;" name="ca_access_level" />
        <meta content="9/11/2018T16:39-5:00" name="ca_date_time" />
        <meta content="(supervisor)" name="ca_creator" />
        <meta content="&lt;authorit:ca_source&gt;" name="ca_source" />
        <meta content="HTML" name="ca_format" />
        <meta content="&lt;authorit:ca_database&gt;" name="ca_database" />
        <meta content="&lt;authorit:ca_application_server&gt;" name="ca_application_server" />
        <meta content="&lt;authorit:ca_operating_system&gt;" name="ca_operating_system" />
        <meta content="&lt;authorit:ca_star_code&gt;" name="ca_star_code" />
        <meta content="&lt;authorit:ca_cms_id&gt;" name="ca_cms_id" />
        <script language="javascript" type="text/javascript">
        </script> <script language="javascript" src="../../Resources/open_parent.js" type="text/javascript"></script> <script language="javascript" src="../../Resources/mailerwin.js" type="text/javascript"></script> <script language="javascript" type="text/javascript"></script></head>
    <body onload="loadParent();highlightx();if (isTOCLoaded()) {highlight('8355')}">
        <h1 class="heading1">
            <MadCap:concept term="User Guides" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" />MongoDB: Schema Validation</h1>
        <p class="bodytext">You can validate schema for MongoDB forward engineering scripts. The schema validator verifies fields in collections based on their data type. If enabled, this feature restricts forward engineering script generation in case the data in the fields is not in line with the assigned data type. Thus, enabling you to avoid any errors in the forward engineering script.  This feature is enabled by default for fields in collections.</p>
        <p class="bodytext">In case of any exceptions, you can select the Exclude Schema Validator check box to exclude validations for one or more fields. Doing so overrides the assigned data type of a field and generates the script successfully.</p>
        <p class="bodytext">This topic walks you through the steps to generate schema validation for fields in a simple table (collection) and generate schema using an example. The following table lists the fields and assigned data types in a MongoDB collection, Customer. </p>
        <table border="0" cellpadding="2" cellspacing="0" style="border-collapse: collapse;border-left-style: solid;border-left-width: 0px;border-right-style: solid;border-right-width: 0px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;mc-table-style: url('../../Resources/TableStyles/TableStyle.css');margin-left: 0;margin-right: auto;" class="TableStyle-TableStyle">
            <col class="TableStyle-TableStyle-Column-Column1" />
            <col class="TableStyle-TableStyle-Column-Column1" />
            <tr align="left" class="TableStyle-TableStyle-Body-Body1" valign="top">
                <td style="text-align: center;" class="TableStyle-TableStyle-BodyE-Column1-Body1">
                    <p class="tableheading">Fields</p>
                </td>
                <td style="text-align: center;" class="TableStyle-TableStyle-BodyD-Column1-Body1">
                    <p class="tableheading">Data Type</p>
                </td>
            </tr>
            <tr align="left" valign="top" class="TableStyle-TableStyle-Body-Body1">
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyE-Column1-Body1">Name</td>
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyD-Column1-Body1">STRING</td>
            </tr>
            <tr align="left" valign="top" class="TableStyle-TableStyle-Body-Body1">
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyE-Column1-Body1">Year</td>
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyD-Column1-Body1">INTEGER</td>
            </tr>
            <tr align="left" valign="top" class="TableStyle-TableStyle-Body-Body1">
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyE-Column1-Body1">Subjects</td>
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyD-Column1-Body1">STRING</td>
            </tr>
            <tr align="left" valign="top" class="TableStyle-TableStyle-Body-Body1">
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyE-Column1-Body1">Address</td>
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyD-Column1-Body1">OBJECT</td>
            </tr>
            <tr align="left" valign="top" class="TableStyle-TableStyle-Body-Body1">
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyE-Column1-Body1">Street</td>
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyD-Column1-Body1">STRING</td>
            </tr>
            <tr align="left" valign="top" class="TableStyle-TableStyle-Body-Body1">
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyE-Column1-Body1">City</td>
                <td style="color: #000000;" class="TableStyle-TableStyle-BodyD-Column1-Body1">STRING</td>
            </tr>
        </table>
        <p class="bodytext">The following image displays the fields in a collection and the assigned data types.</p>
        <p class="bodytext">
            <img src="../../Resources/Images/MongoDB-Schema-Validator-Field-Editor.png" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="width: 525px;height: 373px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" />
        </p>
        <p class="bodytext">To generate schema validation for a MongoDB collection, follow these steps:</p>
        <ol class="listnumber">
            <li class="listnumber">In erwin DM, create a collection with fields, and assign relevant datatypes.<p class="noteAlt">Ensure that a database in assigned to the collection.</p></li>
            <li class="listnumber">Right-click the collection and click <b>Collection Properties</b>.<br />The MongoDB Collection Editor appears.</li>
            <li class="listnumber">Go to the <b>Schema Validator</b> tab.<br /></li>
            <li class="listnumber"> Click <img src="../../Resources/Images/Icon-Schema-Validator-Template-Option.png" style="width: 20px;height: 21px;" /> to generate schema validation template.<br />This displays the generated schema validation template based on the field properties and assigned datatypes.<br /><img src="../../Resources/Images/MongoDB-Schema-Validator-Tab-Option.png" style="width: 488px;height: 581px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" /></li>
            <li class="listnumber">Click <img src="../../Resources/Images/Icon-Edit-Schema-Validator.png" style="width: 18px;height: 16px;" /> to edit the schema.<br />The Collection Schema Validator editor appears. This displays the generated schema validation template with validations in edit mode.</li>
            <li class="listnumber">Edit the schema template for validations and add a description for the fields based on your requirement. <br /><p>In this example, the validation properties of the fields and descriptions are updated as shown in the following image.</p><p> <img src="../../Resources/Images/MongoDB-Schema-Validator-Editor.png" style="width: 543px;height: 531px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" /></p></li>
            <li class="listnumber">
                <p>Once you have made changes to the schema template, click <b>OK</b>.<br />The schema template validation changes are saved.</p>
            </li>
            <li class="listnumber">
                <p>On the application ribbon, click <b>Action</b> &gt; <b>Schema</b>.<br />The Forward Engineer Schema Generation Wizard appears.</p>
            </li>
            <li class="listnumber">
                <p>Go to <b>Preview</b> tab.<br />The updated schema with the validations appear.<br /><img src="../../Resources/Images/MongoDB-FE-Preview.png" style="width: 549px;height: 472px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" /><br /></p>
            </li>
            <li class="listnumber">In the Preview section, edit the schema to correct the random integer values.<p class="noteAlt">Generating schema validation template adds random integer values to the fields with INTEGER datatype. Ensure that you replace this with valid value to generate the schema successfully.</p></li>
            <li class="listnumber">Click <b>Generate</b>.<br />The MongoDB Connection screen appears. Connect to the database. For more information, refer to the <a href="https://bookshelf.erwin.com/bookshelf/public_html/12.1/Content/User Guides/erwin Help/NoSQLDatabases_Connection_Parameters.html">Database Connection Parameters</a> topic.<br />The schema is generated successfully along with the validations.<br /><img src="../../Resources/Images/Generate-Schema-mongoDB.png" style="width: 429px;height: 301px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" /> </li>
        </ol>
        <p class="bodytext">The schema generation wizard displays errors if the field-level validations are not met. For example, the schema in the following image accepts values between 2020 and 2030 in the Year field. The, Year field is updated with the value 2011. </p>
        <p class="bodytext">
            <img src="../../Resources/Images/FE-MongoDB-Preview-Validation.png" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="width: 560px;height: 477px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" />
        </p>
        <p class="bodytext">When you click <b>Generate</b>, the schema generation fails as the validation rules are not met and displays the following error.</p>
        <p class="bodytext">
            <img src="../../Resources/Images/MongoDB-Schema-Generate-Error.png" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="width: 424px;height: 292px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" />
        </p>
        <p class="bodytext"> Alternatively, you can exclude validations for one or more fields to generate schema.  For example, you can exclude schema validation for the field, Subject (STRING), in this collection. Then, replace a string with a number (INTEGER). This overrides the assigned data type of a field and generates the script successfully.</p>
        <p class="bodytext">To exclude schema validation for a field, open Collection Field Editor, select a field, and then, select the <b>Exclude Schema Validator</b> check box.</p>
        <p class="bodytext">
            <img src="../../Resources/Images/MongoDB-Field-Editor-Exclude-Validator.png" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="width: 613px;height: 271px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" />
        </p>
        <p class="bodytext">In the Forward Engineering Schema Wizard, when you click <b>Generate</b>, the schema is generated successfully.</p>
        <p class="bodytext">
            <img src="../../Resources/Images/Generate-Schema-mongoDB.png" style="width: 429px;height: 301px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" />
            <br />
        </p>
    </body>
</html>